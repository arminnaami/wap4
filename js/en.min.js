function getFormat(format){if(format=="mp3-128kbps"){format="mp3";}
if(format=="amr-mono-12kbps"){format="amr";}
if(format=="3gp-176x144-amr"){format="3gp";}
if(format=="mp4-320x240-aac"){format="mp4";}
if(format=="ipod-320x240-4-3"){format="mp4";}
if(format=="ipod-320x240-16-9"){format="mp4";}
if(format=="ipod-nano-176x128"){format="mp4";}
if(format=="psp"){format="mp4";}
//if(format=="gif"){format="gif";}
if(format=="aac"){format="aac";}
if(format=="ogg-audio-video"){format="ogg";}
return format;};var opt_lang='en';var opt_allowed=['mp3','avi','flv','mov','mp4','3gp','ogg','flac','aac','wmv','mpg','ac3'];var opt_max='';var opt_done='Upload successful';var opt_download='File successfully converted! Download here';var opt_file='Upload local file...';var faila_nosaukums;var tube_title;$(document).ready(function(){$('.convert_options').hide();$('#bar_convert').hide();$('#converter2').hide();function createUploader(){var uploader=new qq.FileUploader({element:document.getElementById('demo'),listElement:document.getElementById('separate-list'),action:'/ffmpeg/val/server/php.php',multiple:false,params:{caur_ajax:'true',key:opt_uniqid,lang:opt_lang},allowedExtensions:opt_allowed,sizeLimit:opt_max*1024,minSizeLimit:1,debug:true,onSubmit:function(id,fileName){$('.qq-upload-button').hide('fast');$('.content_right').remove();$(".content_left").css({"width":"98%"});$("#content_left_apvalks").css({"padding":"0px 200px 0px 200px"});$("#content_right_apvalks").css({"padding":"0px 200px 0px 200px"});$('#separate-list').show();$('#bar_convert').appendTo($('#content_left_apvalks'));$('#converter2').appendTo($('#content_left_apvalks'));},onProgress:function(id,fileName,loaded,total){},onComplete:function(id,fileName,responseJSON){document.getElementById('demo').style.display='none';$('.left_top').hide();$('#converter_left').show();$('#converter2').show();$('.step').hide('slow');$('.media').hide('slow');faila_nosaukums=fileName;},onCancel:function(id,fileName){},messages:{typeError:"{file}- Failed to get extension or extension is not allowed ({extensions}).",sizeError:"{file}- File size too big, max: {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(message){alert(message);}});}
function getSelectedValue(id){return $("#"+id).find("dt a span.value").html();}
$(function(){var timer=setInterval(showDiv,100);function showDiv(){$(".upload_file_button").html(opt_file);clearInterval(timer);}});$("#youtube").live("submit",function(){$('.content_left').remove();$(".content_right").css({"width":"98%"});$("#content_left_apvalks").css({"padding":"0px 200px 0px 200px"});$("#content_right_apvalks").css({"padding":"0px 200px 0px 200px"});$('.right_top').hide();$('#bar_convert').appendTo($('#content_right_apvalks'));$('#converter2').appendTo($('#content_right_apvalks'));$('#bar_convert').hide();$('#converter2').hide();if($('#youtube_link').val().indexOf("youtube.com")==-1&&$('#youtube_link').val().indexOf("vimeo.com")==-1){alert("Incorrect link! Link must start with: http://www.youtube.com, http://m.youtube.com, http://vimeo.com");return false;}
var website_type;if($('#youtube_link').val().indexOf("youtube.com")!=-1){website_type="youtube";}
if($('#youtube_link').val().indexOf("vimeo.com")!=-1){website_type="vimeo";}
$('#bar_youtube').show("slow");$('#demo').hide("slow");$.ajax({type:"POST",url:"/en/converter/get_title/"+opt_uniqid+"/",data:({youtube:$('#youtube_link').val(),website:website_type}),success:function(msg){tube_title=msg;}});$.ajax({type:"POST",url:"/en/converter/ajax_upload/"+opt_uniqid+"/",data:({youtube:$('#youtube_link').val(),website:website_type}),success:function(msg){$('#youtube_uploaded').html(msg);$('.media').hide("slow");$('#bar_youtube').hide();$('#youtube_uploaded').hide();$('#converter_right').show();$('#converter2').show();faila_nosaukums=tube_title+".flv";$('#youtube_uploaded2').html("100%");$('#youtube_uploaded2').width(300);clearInterval(refreshIntervalId2);}});$('#youtube_uploaded').html("Uploading video. Please wait...");$('#bar_youtube').show();refreshIntervalId2=setInterval(function(){$("#youtube_uploaded2").load("/en/converter/upload_status/"+opt_uniqid+"/"+tube_title,function(response,status,xhr){if(status=="error"){var msg="Sorry but there was an error: ";$("#error").html(msg+xhr.status+" "+xhr.statusText);clearInterval(refreshIntervalId2);}
else
{$('#youtube_uploaded2').width(response*4);if(response==100||response==99)
{$('#youtube_uploaded').html(opt_done);clearInterval(refreshIntervalId2);$('.media').hide("slow");$('.step').hide("slow");document.getElementById('converter2').style.visibility='visible';$('#converter2').show();faila_nosaukums=tube_title+".flv";$('#youtube_uploaded2').html("100%");$('#youtube_uploaded2').width(400);clearInterval(refreshIntervalId2);}}});},2000);return false;});$('.header_title').click(function(){window.location="/"+opt_lang;});createUploader();$('.cut_field').hide();$('#cut').attr("unchecked");$('#cut').change(function(){if($(this).attr("checked")){$('.cut_field').show();}
else
{$('.cut_field').hide();}});$('#resize_field').hide();$('#resize').attr("unchecked");$('#resize').change(function(){if($(this).attr("checked")){$('#resize_field').show();}
else
{$('#resize_field').hide();}});var test;$("#conv").live("submit",function(){$('#converter2').hide("slow");$('.media').hide("slow");$('#youtube_uploaded').hide("slow");$('#bar_youtube').hide("slow");$('#bar_convert').show("slow");test=$.ajax({url:"/en/converter/change_body/"+faila_nosaukums,async:false}).responseText;refreshIntervalId=setInterval(function(){$("#percents").load("/en/converter/statuss/"+opt_uniqid,function(response,status,xhr){if(status=="error"){var msg="Sorry but there was an error: ";$("#error").html(msg+xhr.status+" "+xhr.statusText);clearInterval(refreshIntervalId);}
else if(response>100)
{$('#percents').html("100");$("#percents").append("%");$('#percents').width(400);$('#bar_convert').hide();var fails=test+"-"+opt_uniqid+"."+getFormat($("input[name='format']:checked").val());var saite_uz_failu=opt_download+': <a href="/files/converted/'+fails+'">'+fails+'</a>';$('#download').html(saite_uz_failu);$('#download').show("slow");clearInterval(refreshIntervalId);}
else
{$('#percents').html(response);$('#percents').width(response*4);$("#percents").append("%");if(response==100||response==99)
{var fails=test+"-"+opt_uniqid+"."+getFormat($("input[name='format']:checked").val());var saite_uz_failu=opt_download+': <a href="/files/converted/'+fails+'">'+fails+'</a>';$('#bar_convert').hide();$('#percents').width(400);$('#download').html(saite_uz_failu);$('#download').show("slow");clearInterval(refreshIntervalId);}}});},2000);$.get("/en/converter/convert/"
+opt_uniqid+"/"
+$("input[name='format']:checked").val()
+"/"+faila_nosaukums+"/"
+$('input:checkbox:checked').val()
+"/"+$('#s_hh').val()
+"/"+$('#s_mm').val()
+"/"+$('#s_ss').val()
+"/"+$('#e_hh').val()
+"/"+$('#e_mm').val()
+"/"+$('#e_ss').val()
+"/"+$('#apraksts').val()
+"/"+$('#resize').val()
+"/"+$('#width').val()
+"/"+$('#heigth').val(),{input_file:faila_nosaukums,caur_ajax:"true",key:opt_uniqid,format:$("input[name='format']:checked").val(),cut:$('input:checkbox:checked').val(),s_hh:$('#s_hh').val(),s_mm:$('#s_mm').val(),s_ss:$('#s_ss').val(),e_hh:$('#e_hh').val(),e_mm:$('#e_mm').val(),e_ss:$('#e_ss').val(),descr:$('#apraksts').val(),resize:$('#resize').val(),width:$('#width').val(),heigth:$('#heigth').val()},function(data){clearInterval(refreshIntervalId);$('#percents').html("100%");$('#percents').width(400);$('#bar_convert').hide();var fails=data+"-"+opt_uniqid+"."+getFormat($("input[name='format']:checked").val());var saite_uz_failu='File successfully converted! Download here: <a href="/files/converted/'+fails+'">'+fails+'</a>';$('#download').html(saite_uz_failu);$('#download').show("slow");});return false;});});var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-4906479-3']);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();